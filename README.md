# 💻개미들의곡소리 - Backend

<a href="https://www.antsori.com"><img src="https://user-images.githubusercontent.com/86486778/144210068-e7ae76fd-db3f-466c-8886-c2198f63c4c2.png" style="width:500px;"></a>

## 🏠 [Home Page Link](https://www.antsori.com)
<hr>
<br>

##  🗂️ 목차

### 1. [프로젝트 소개](#-프로젝트-소개)

### 2. [팀 구성](#-팀-구성)

### 3. [기술 스텍](#-기술스택-why)

### 4. [라이브러리](#-라이브러리-why)

### 5. [주요 기능](#4-주요-기능)

### 6. [최종 성과](#최종-성과)

### 7. [trouble-shooting]](#배운점-or-trouble-shooting)

<hr>
<br>

## 📈 프로젝트 소개

#### 주식하는 개미들의 투표기반 커뮤니티!

 - 📚 무거운 고민들을 쉽고 가볍게 해결할 수 있는 
 - 📉 곡소리 나는 개미들의 주식 커뮤니티,
 - 📈 투표를 통해 당신의 생각을 여러 개미들과 자유롭게 나눠보세요!


<br> 

## 🗓 프로젝트 기간
2021년 10월 23일 ~ 2021년 12월 03일

<br>

## 🧑‍💻 팀 구성

[팀 소개 페이지](https://crawling-health-e0d.notion.site/be6df84bde484ca883f54739be96eb8f)

<table>
  <tr>
  <td colspan='2' align="center">
  Backend
  </td>
  <td colspan='2' align="center">
  Frontend
  </td>
  <td colspan='2' align="center">
  Designer
  </td>
  <tr>
  <td align="center"><img src="https://crawling-health-e0d.notion.site/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F56d2808d-73f7-47d9-b580-310b311774f0%2FUntitled.png?table=block&id=dae3a277-b892-4185-9dc1-2b9fd53605e9&spaceId=e0735ea4-78ca-47db-be31-3e9c8641e938&width=260&userId=&cache=v2" width="60px;" alt=""/>
    </td>
    <td align="center" >
    <b>김정호</b></a><br>
    <a href="https://github.com/jeangho293">Github</a>
    <br><img src="https://img.shields.io/badge/Node.js-339933?style=flat&logo=Node.js&logoColor=white"/><br>
    </td>
    <td align="center"><img src="https://crawling-health-e0d.notion.site/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F4cd551ad-0c09-4ef8-8027-b9e3d47a79e8%2FUntitled.png?table=block&id=493a20f5-e908-4ef8-b07d-710d2f42f3f9&spaceId=e0735ea4-78ca-47db-be31-3e9c8641e938&width=260&userId=&cache=v2" width="60px;" alt=""/>
    </td>
    <td align="center">
    <b>김갑민</b></a><br />
    <a href="https://github.com/gabmin" >Github</a>
    <br><img src="https://img.shields.io/badge/React-61DAFB?style=flat&logo=React&logoColor=white"/><br>
    </td>
    <td align="center"><img src="https://crawling-health-e0d.notion.site/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fd266d37c-2c38-4f03-b50f-c7908dabf868%2FUntitled.png?table=block&id=ebb3a525-c75c-4f30-974a-629f8818f109&spaceId=e0735ea4-78ca-47db-be31-3e9c8641e938&width=260&userId=&cache=v2" width="60px;" alt=""/>
    </td>
    <td align="center">
    <b>김예은</b></a><br />
    </td>
    <tr>
    <td align="center"><img src="https://crawling-health-e0d.notion.site/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F2f229f59-5b48-4501-b9d8-44395fa066ab%2FUntitled.png?table=block&id=65bb4f7a-a244-4ba9-85e9-1886dc98432b&spaceId=e0735ea4-78ca-47db-be31-3e9c8641e938&width=260&userId=&cache=v2" width="60px;" alt=""/>
    </td>
    <td align="center">
    <b>조윤재</b></a><br /> 
    <a href="https://github.com/Yunjaejo">Github</a>
    <br><img src="https://img.shields.io/badge/Node.js-339933?style=flat&logo=Node.js&logoColor=white"/><br>
    </td>
    <td align="center"><img src="https://crawling-health-e0d.notion.site/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F651ce4da-3dd7-4845-8207-bcb564eb641d%2FUntitled.png?table=block&id=9973b5b1-8ec8-4d30-a7da-64d453e1da16&spaceId=e0735ea4-78ca-47db-be31-3e9c8641e938&width=260&userId=&cache=v2" width="60px;" alt=""/>
    </td>
    <td align="center">
    <b>박시영</b></a><br /> 
    <a href="https://github.com/larisms">Github</a>
    <br><img src="https://img.shields.io/badge/React-61DAFB?style=flat&logo=React&logoColor=white"/><br>
    </td>
    <td align="center"><img src="https://crawling-health-e0d.notion.site/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fcd2c4a8c-5a95-41e0-9053-9897e4c95a1b%2FUntitled.png?table=block&id=d4cdb94a-8915-455e-af65-6f98d33dc665&spaceId=e0735ea4-78ca-47db-be31-3e9c8641e938&width=260&userId=&cache=v2" width="60px;" alt=""/>
    </td>
    <td align="center">
    <b>김한비</b></a><br /> 
    </td>
    </tr>
    <tr>
    <td align="center"><img src="https://crawling-health-e0d.notion.site/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fd36d536e-0432-4cb0-96ef-9a1c3a1889d5%2FUntitled.png?table=block&id=8b7efded-cc3e-45e9-a950-724957fe55cd&spaceId=e0735ea4-78ca-47db-be31-3e9c8641e938&width=260&userId=&cache=v2" width="60px;" alt=""/>
    </td>
    <td align="center">
    <b>황창환</b></a><br /> 
    <a href="https://github.com/changchanghwang">Github</a>
    <br><img src="https://img.shields.io/badge/Node.js-339933?style=flat&logo=Node.js&logoColor=white"/><br>
    </td>
    <td align="center"><img src="https://crawling-health-e0d.notion.site/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F828d0f28-79c9-407a-83da-6ba55ce7fbe4%2FUntitled.png?table=block&id=3d63dc23-b006-47f5-8191-65e9cc1350d8&spaceId=e0735ea4-78ca-47db-be31-3e9c8641e938&width=260&userId=&cache=v2" width="60px;" alt=""/>
    </td>
    <td align="center">
    <b>장원배</b></a><br /> 
    <a href="https://github.com/calvin9150">Github</a>
    <br><img src="https://img.shields.io/badge/React-61DAFB?style=flat&logo=React&logoColor=white"/><br>
    </td>
    <td colspan='2'></td>
    </tr>
</table>

<br>

## 🛠 기술스택 ([WHY?](https://spark-stove-6bf.notion.site/cf6de263fec844ba8c989b4c9a6dd32e))

기술스택 | 설명
---|:---:
Node.js | 자바스크립트 런타임
Express | 웹 프레임워크
TypeScript | 타입스크립트
MySQL | MySQL
Redis | Redis
Jenkins | CI/CD 툴
Nginx | Proxy 서버
Docker | Docker

<br>

## 📖 라이브러리 ([WHY?](https://spark-stove-6bf.notion.site/9064e96f94854aaca56925f80d978bdb))

라이브러리 | 설명
---|:---:
<img src='https://img.shields.io/badge/artillery-1.7.9-lightgrey'> | 서버 부하 테스트
<img src='https://img.shields.io/badge/bcrypt-5.0.1-lightgrey'> | 비밀번호 암호화
<img src='https://img.shields.io/badge/compression-1.7.4-lightgrey'>  | 데이터 압축
<img src='https://img.shields.io/badge/cors-2.8.5-lightgrey'> | 교차 리소스 공유
<img src='https://img.shields.io/badge/dotenv-10.0.0-lightgrey'>  | 환경변수 관리
<img src='https://img.shields.io/badge/express-4.17.1-lightgrey'> | 서버
<img src='https://img.shields.io/badge/express--rate--limit-5.5.1-lightgrey'> | 요청 횟수 제한
<img src='https://img.shields.io/badge/helmet-4.6.0-lightgrey'>  | HTTP 헤더 보안
<img src='https://img.shields.io/badge/ioredis-17.4.1-lightgrey'>  | redis 연결
<img src='https://img.shields.io/badge/joi-17.4.1-lightgrey'>  | 입력데이터 검출
<img src='https://img.shields.io/badge/jest-27.3.1-lightgrey'>  | 테스트 코드
<img src='https://img.shields.io/badge/jsonwebtoken-8.5.1-lightgrey'>  | 서명 암호화
<img src='https://img.shields.io/badge/moment-2.29.1-lightgrey'> | 날짜 라이브러리
<img src='https://img.shields.io/badge/morgan-1.10.0-lightgrey'> | Http Log 기록
<img src='https://img.shields.io/badge/mysql-2.3.2-lightgrey'> | MySQL
<img src='https://img.shields.io/badge/node--schedule-2.0.0-lightgrey'> | 스케쥴 업무 자동화
<img src='https://img.shields.io/badge/request--ip-2.1.3-lightgrey'> | client ip 요청
<img src='https://img.shields.io/badge/sequelize-6.7.0-lightgrey'>  | MySQL ORM
<img src='https://img.shields.io/badge/sequelize--cli-6.2.0-lightgrey'> | MySQL ORM Console
<img src='https://img.shields.io/badge/swagger--ui--express-4.1.6-lightgrey'> | API 문서화
<img src='https://img.shields.io/badge/ts--node-10.4.0-lightgrey'> | TypeScript 실행
<img src='https://img.shields.io/badge/tsc--watch-10.4.0-lightgrey'> | TypeScript 실행(watch)
<img src='https://img.shields.io/badge/typescript-4.4.4-lightgrey'> | TypeScript
<img src='https://img.shields.io/badge/winston-3.3.3-lightgrey'> | Log 파일 생성
<img src='https://img.shields.io/badge/winston--daily--rotate--file-4.5.5-lightgrey'> | Log 파일 관리

<br>

## 🕹️ 주요 기능

### 로그인 / 회원가입

- 영문 소문자, 숫자, 특수기호를 이용하여 아이디와 비밀번호를 설정할 수 있다.
- 닉네임을 입력할 수 있으며, 커뮤니티를 이용하는 모든 곳엔 닉네임만 노출된다.

### 찬반 / 객관식 인기글

- 투표 참여자 수가 가장 많은 게시글 10개를 슬릭 슬라이더 방식으로 순서대로 보여준다.
- 화면에 크기에 따라 최대 4개씩 게시글을 보여주고 넘길 수 있다.
- 원하는 게시물을 클릭하면 해당 게시물의 메인 뷰 혹은 상세페이지로 이동할 수 있다.

### 검색

- 검색어를 입력하면 검색어가 포함된 모든 게시글을 리스트 형식으로 보여준다.
- 최신순으로 정렬되어 내림차순으로 게시글을 보여준다.
- Pagination 기능을 추가하여 페이지당 최대 10개의 게시물을 보여준다.
- 원하는 게시물을 클릭하면 해당 게시물의 메인 뷰 혹은 상세페이지로 이동할 수 있다.

### 프로필 페이지

- 닉네임 변경 기능을 추가하여 아이디 중복검사 후 언제든지 닉네임을 변경할 수 있다.
- 자신이 작성한 글과 참여한 글을 리스트 형식으로 최신순, 내림차순으로 정렬되어 보여준다.
- Pagination 기능을 추가하여 페이지당 최대 10개의 게시물을 보여준다.
- 원하는 게시물을 클릭하면 해당 게시물의 메인 뷰 혹은 상세페이지로 이동할 수 있다.

### 찬반 투표

- 어떠한 이야기 혹은 고민에 대해 두 가지의 선택지 중 하나를 선택할 수 있다.
- 전체 게시물, 진행 중인 게시물, 종료된 게시물을 선택해서 볼 수 있다.
- 슬릭 슬라이더 방식과 리스트 방식 두 가지 형태가 존재하며, 원하는 방식으로 보고 이용할 수 있다.
- 리스트 형식은 Pagination 기능이 있어 페이지당 최대 5개의 게시물을 볼 수 있다.
- 하나의 선택지를 선택하면 즉시 투표 결과를 Progress Bar 형식으로 보여준다.
- 언제든지 재투표가 가능하며 그에 따라 투표 결과가 바로 반영된다.
- 작성자의 프로필을 클릭하면 해당 프로필 페이지로 이동할 수 있다.
- '좋아요' 기능이 존재하여 관심 있는 게시글에 한 번만 '좋아요'를 할 수 있다.

### 객관식 투표

- 어떠한 이야기 혹은 고민에 대해 최대 5개의 선택지 중 하나를 선택할 수 있다.
- 전체 게시물, 진행 중인 게시물, 종료된 게시물을 선택해서 볼 수 있다.
- 슬릭 슬라이더 방식과 리스트 방식 두 가지 형태가 존재하며, 원하는 방식으로 보고 이용할 수 있다.
- 리스트 형식은 Pagination 기능이 있어 페이지당 최대 5개의 게시물을 볼 수 있다.
- 하나의 게시물을 선택하면 상세페이지로 넘어가고 투표를 진행할 수 있다.
- 해당 게시물에 대해 댓글을 작성할 수 있으며 수정, 삭제, '좋아요' 가 가능하다.
- 다른 유저가 작성한 댓글에 대댓글을 작성할 수 있다.
- 댓글 리스트에 Pagination 기능이 있어 페이지당 최대 5개의 댓글을 볼 수 있다.
- 작성자의 프로필을 클릭하면 해당 프로필 페이지로 이동할 수 있다.
- '좋아요' 기능이 존재하여 관심 있는 게시글에 한 번만 '좋아요'를 할 수 있다.

<hr>

<br>

## 🧱 프로젝트 아키텍처
![architecture](https://user-images.githubusercontent.com/86486778/144222020-cc6e3a49-3e93-4cda-a999-471f9d701456.png)

<br>

## 🧾 Serverside Flow Chart
![API](https://user-images.githubusercontent.com/86486778/144233426-407e657b-b7fe-4558-8146-4dc692f7e7f7.jpg)

<br>

## 🐜 DB ERD
![ERD](https://user-images.githubusercontent.com/86486778/144221872-508e5c65-43e5-4540-983c-25230964aae5.png)
<br>

<br> 

## 📂 [Project Notion](https://crawling-health-e0d.notion.site/Project-3b911ebdb6114fb7be4b54956a9579dd)

<br>

## ✍ Code Convention
- api url : dash case
- model : camel case
- file : dash case
- 변수 : lower case camel case
- function: camel case, 동사+명사

<br>

## 🐱 Git Rule
- 선빵필승. 뒤에 commit하는사람이 conflict 해결해서 commit하기
- commit convention
  - feat : 새로운 기능 추가
  - fix : 버그 수정
  - edit : 기능 수정
  - docs : 문서 수정
  - style : 코드 포맷팅, 세미콜론 누락, 코드 변경이 없는 경우
  - refactor : 코드 리팩토링
  - test : 테스트 코드, 리팩토링 테스트 코드 추가
  - chore : 빌드 업무 수정, 패키지 매니저 수정
  - merge: pull 받은 후 바로 푸시를 해야될 경우
  - mig: migration
  - 제목은 50자 미만, 문장의 끝에 마침표 넣지 않음. 과거 시제 사용하지 않고, 명령어로 작성하도록  함.
  - 제목 외에 추가적으로 정보를 전달하고 싶을 경우 본문에 추가 정보 기입
  >예시 : [feat] comment router CRUD 기능 추가 :  본인 이름
- 각 기능 브랜치에서 작업 후 push —> develop 브랜치에 merge는 pull requests를 통해서 하기.
  - 모든 pull requests는 팀원들의 확인 후 merge
  - 이슈가 생길 시 issue 탭 활용

<br>

## 최종 성과

<br>

## 배운점 or trouble shooting